## 事件车的使用

> 解决问题：兄弟组件之间的传值

1. 创建 js
2. 在某一组件中绑定自定义事件，可附加参数（触发当前实例上的事件。附加参数都会传给监听器回调）
3. 在想要关联的组件中获取值（监听当前实例上的自定义事件。事件可以由 vm.$emit 触发。回调函数会接收所有传入事件触发函数的额外参数。）

> bus.js 文件

```vue
import Vue from 'vue';

/**
 * 事件车
 */
// 使用 Event Bus
const bus = new Vue();

export default bus;

/**
 * 方法二
 * 
import Vue from 'vue';
export default new Vue();
 */
```

```vue
import bus from '../common/bus';
if (this.userImg !== '') {
	bus.$emit('userImg', this.userImg);
}
```

> 在xxx.vue文件中导入bus.js 文件
```vue
import bus from '../common/bus';
bus.$on('userImg', arg => {
	this.userImg = arg; // 接收
});
```

> 这样做，相关联的组件中的值就会发生改变了

### 优化

假设我的页面中有三处使用到了头像，一处是头部，一处是主页，一处是个人中心。三处需要发送请求获取用户数据，而个人中心中修改数据的时候，对应的头部与主页中的数据也进行修改，现在想想三次请求显然是多余的，我们可以在头部中获取用户数据，附加自定义事件，在主页和个人中心中通过监听该自定义事件获取数据。个人中心修改数据，也要附加自定义事件，然后主页和头部也要通过监听该自定义事件获取数据。这样一来变得麻烦了。那么就有了vuex

头部，主页与个人中心中的用户数据，都在vuex中的仓库中获取，第一次需要在头部请求用户数据，并把用户数据设置到仓库中，那么主页和个人中心中的用户就都到仓库中获取，当然头部中的用户数据也在此处获取，（疑问，不是头部自己请求获取的数据吗？有数据了为啥还需要从仓库中获取，原因：当我在用户中心修改用户数据的时候，主页和头部数据也要跟着改，只有头部数据是从仓库中获取的才可以做到）